<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="/css/estilos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .steam-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .steam-puff {
            position: absolute;
            bottom: -50px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.4) 0%, rgba(200, 200, 200, 0.2) 50%, transparent 100%);
            opacity: 0;
            animation: rise-and-fade 8s ease-out infinite;
        }

        @keyframes rise-and-fade {
            0% {
                transform: translateY(0) translateX(0) scale(0.5);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            50% {
                opacity: 0.4;
            }
            100% {
                transform: translateY(-100vh) translateX(100px) scale(2.5);
                opacity: 0;
            }
        }

        .container, .routes-section {
            position: relative;
            z-index: 1;
        }

        .footer {
            position: relative;
            z-index: 1;
        }
    </style>
</head>
<body>
    <div class="steam-container" id="steamContainer"></div>

    <%- include('partials/navbar') %>

    <div class="container" style="padding-top: 40px;">
        <div class="routes-section">
            <h2 class="section-title">Rutas disponibles - <%= fechaActual %></h2>
            <div class="routes-grid">
                <% if (rutas && rutas.length > 0) { %>
                    <% rutas.forEach(ruta => { %>
                        <div class="route-card glass-card">
                            <div class="route-icon"><i class="fas fa-subway"></i></div>
                            <h3><%= ruta.nombre %></h3>
                            <div class="route-details">
                                <p><i class="fas fa-map-marker-alt" style="color: #ff1744;"></i> <strong><%= ruta.origen %></strong></p>
                                <i class="fas fa-arrow-down" style="margin: 5px 0; opacity: 0.5;"></i>
                                <p><i class="fas fa-map-marker-alt" style="color: #00e676;"></i> <strong><%= ruta.destino %></strong></p>
                            </div>
                            <div class="route-price">$<%= parseFloat(ruta.precio).toFixed(2) %></div>
                            <a href="/pago?rutaId=<%= ruta.id %>" class="btn-primary btn-sm">Comprar Ticket</a>
                        </div>
                    <% }) %>
                <% } else { %>
                    <p>No hay rutas disponibles en este momento.</p>
                <% } %>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section social">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
                <a href="#"><i class="fab fa-tiktok"></i></a>
            </div>

            <div class="footer-section info">
                <h3>Información</h3>
                <ul>
                    <li><a href="#">Antisoborno</a></li>
                    <li><a href="#">Transparencia</a></li>
                    <li><a href="#">Rendición de Cuentas</a></li>
                    <li><a href="#">PAC</a></li>
                </ul>
            </div>

            <div class="footer-section contacto">
                <h3>Contacto</h3>
                <p><strong>Correo:</strong><br> comunicacion@metrodequito.gob.ec</p>
                <p><strong>Teléfono:</strong> 023827860</p>
                <p><strong>Dirección:</strong> Calle Montúfar N2-50 y Calle Sucre</p>
            </div>

            <div class="footer-section logos">
                <div class="logo-placeholder">
                    <i class="fas fa-subway"></i> Metro <br>
                    <span>Quito Alcaldía Metropolitana</span>
                </div>
            </div>
        </div>
    </footer>

    <script>
        const steamContainer = document.getElementById('steamContainer');
        
        function createSteamPuff() {
            const puff = document.createElement('div');
            puff.className = 'steam-puff';
            
            const size = 60 + Math.random() * 80;
            puff.style.width = size + 'px';
            puff.style.height = size + 'px';
            
            puff.style.left = Math.random() * 100 + '%';
            
            puff.style.animationDelay = Math.random() * 3 + 's';
            
            puff.style.animationDuration = (6 + Math.random() * 4) + 's';
            
            steamContainer.appendChild(puff);
            
            setTimeout(() => {
                puff.remove();
            }, 10000);
        }
        
        for (let i = 0; i < 8; i++) {
            createSteamPuff();
        }
        
        setInterval(createSteamPuff, 800);
    </script>

</body>
</html>